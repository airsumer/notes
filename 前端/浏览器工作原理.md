# 浏览器工作原理

浏览器其实主要涉及两个功能：

1. html页面的渲染--主要是由==浏览器引擎==完成
2. javascript代码的执行--主要是由浏览器的==js执行殷勤==完成

因此只需要从这两个方法分析浏览器是如何实现这两个功能的

## 页面渲染

浏览器的核心功能是将HTML文档转换为用户可视的网页。具体的步骤包括：

- **解析HTML**：浏览器读取HTML代码，构建==DOM（文档对象模型）树==。
- **解析CSS**：解析样式表，应用样式规则来展示页面的外观。
- **布局和绘制**：将DOM树和样式结合，计算出元素的位置和大小，最终渲染到屏幕上

### html解析

html解析的主要工作有两个阶段：

1. html代码解析：该阶段主要用于分析html代码的==语法==
2. dom树构建：html代码的语法分析完成后将其组织成dom树

这是一个解释过程,和编译原理中的编译过程相似，可以和编译原理相对比，编译原理主要分为三个阶段：
- 词法分析：该阶段将源代码分解成一个个单词和符号
- 语法分析：利用已经分析出来的单词和符号生成一颗抽象语法树
- 语意分析：语法分析只是根据单词和符号生成一颗语法树，但是单词和符号是否可以作为相应的成分未知，因此需要语义分析判断每一个单词和符号在抽象语法树中的位置是否正确

#### html词法分析
词法分析的主要功能就是从==字符流==得到一系列==词法单元==（tokens），例如从html文档的字符流中解析中html文档中的各种标签，每一个标签其实都是一个==词法单元==。所谓单元就是一个不可再分的单位，是一个原子级的单位。语法分析其实也是一个**分词**的过程，而分词依靠**有限状态机DFA**实现。

词法：描述一个token的基本格式，例如c语言要求变量不能以数字开头，且变量名不能和关键字名字相同。而分词就是依靠词法，将字符串分解成一个一个不可再分的单词。

#### dom树构建

构建dom树其实就是根据标签的层级关系，将子标签作为父标签的子节点。dom树的构建其实就是**语法分析**的过程。

### css解析
css解析在html解析之后，其依赖于dom树，毕竟css是用于表现html各个元素的样式。
